{"ast":null,"code":"import axios from 'axios';\nimport { ref } from 'vue';\nexport default {\n  setup() {\n    const list = ref([]);\n    const error = ref('');\n    const input_name = ref('');\n    const input_age = ref(0);\n    const state = ref('추가');\n    let update_id = 0; //138번 라인에서 수정할 아이디값을 저장할 변수입니다.\n\n    const getList = async () => {\n      try {\n        const res = await axios.get('http://localhost:8088/vue/users');\n        list.value = res.data.list;\n      } catch (err) {\n        console.log(err);\n        error.value = '데이터를 가져오는 중 오류';\n      }\n    };\n\n    getList();\n\n    const add = async () => {\n      error.value = '';\n\n      if (state.value == '추가') {\n        try {\n          await axios.post('http://localhost:8088/vue/users', {\n            name: input_name.value,\n            age: input_age.value\n          });\n          input_name.value = '';\n          input_age.value = '';\n          getList();\n        } catch (err) {\n          console.log(err);\n          error.value = '삽입 중 오류 발생';\n        }\n      } else {\n        try {\n          await axios.patch('http://localhost:8088/vue/users', {\n            name: input_name.value,\n            age: input_age.value,\n            id: update_id\n          });\n          getList();\n          input_name.value = '';\n          input_age.value = '';\n          state.value = '추가';\n        } catch (err) {\n          console.log(err);\n          error.value = '수정 중 오류 발생';\n        }\n      }\n    };\n    /* \r\n                error.value='';\r\n                input_name.value=item.name;\r\n                input_age.value=item.age;\r\n                state.value='수정완료';\r\n     */\n\n\n    const del = async () => {\n      error.value = '';\n\n      try {\n        const res = await axios.delete('http://localhost:8088/vue/users/${id}');\n        console.log(\"delete 후 =\" + res.data);\n        getList();\n      } catch (err) {\n        console.log(err);\n        error.value = '삭제 중 오류 발생';\n      }\n    };\n\n    return {\n      list,\n      error,\n      add,\n      input_name,\n      input_age,\n      del,\n      state\n    };\n  }\n\n};","map":{"version":3,"mappings":"AA6CA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,GAAR,QAAkB,KAAlB;AACA,eAAe;EACXC,KAAK,GAAE;IACH,MAAMC,IAAG,GAAIF,GAAG,CAAC,EAAD,CAAhB;IACA,MAAMG,KAAK,GAAEH,GAAG,CAAC,EAAD,CAAhB;IACA,MAAMI,UAAU,GAACJ,GAAG,CAAC,EAAD,CAApB;IACA,MAAMK,SAAS,GAACL,GAAG,CAAC,CAAD,CAAnB;IACA,MAAMM,KAAI,GAAIN,GAAG,CAAC,IAAD,CAAjB;IACA,IAAIO,SAAQ,GAAI,CAAhB,CANG,CAMgB;;IAEnB,MAAMC,OAAM,GAAI,YAAW;MAC1B,IAAG;QACI,MAAMC,GAAE,GAAI,MAAMV,KAAK,CAACW,GAAN,CAAU,iCAAV,CAAlB;QACAR,IAAI,CAACS,KAAL,GAAaF,GAAG,CAACG,IAAJ,CAASV,IAAtB;MACN,CAHD,CAGC,OAAMW,GAAN,EAAU;QACJC,OAAO,CAACC,GAAR,CAAYF,GAAZ;QACAV,KAAK,CAACQ,KAAN,GAAc,gBAAd;MACJ;IACH,CARD;;IAUAH,OAAO;;IAEP,MAAMQ,GAAE,GAAI,YAAW;MACnBb,KAAK,CAACQ,KAAN,GAAY,EAAZ;;MACJ,IAAGL,KAAK,CAACK,KAAN,IAAa,IAAhB,EAAqB;QACpB,IAAG;UACI,MAAMZ,KAAK,CAACkB,IAAN,CAAW,iCAAX,EAA6C;YAC/CC,IAAI,EAAEd,UAAU,CAACO,KAD8B;YAE/CQ,GAAE,EAAId,SAAS,CAACM;UAF+B,CAA7C,CAAN;UAIAP,UAAU,CAACO,KAAX,GAAiB,EAAjB;UACAN,SAAS,CAACM,KAAV,GAAgB,EAAhB;UACAH,OAAO;QACb,CARD,CAQC,OAAMK,GAAN,EAAU;UACJC,OAAO,CAACC,GAAR,CAAYF,GAAZ;UACAV,KAAK,CAACQ,KAAN,GAAc,YAAd;QACJ;MACH,CAbD,MAaK;QACD,IAAG;UACC,MAAMZ,KAAK,CAACqB,KAAN,CAAY,iCAAZ,EAA+C;YACjDF,IAAI,EAAEd,UAAU,CAACO,KADgC;YAEjDQ,GAAG,EAAEd,SAAS,CAACM,KAFkC;YAGjDU,EAAE,EAAEd;UAH6C,CAA/C,CAAN;UAKAC,OAAO;UACPJ,UAAU,CAACO,KAAX,GAAiB,EAAjB;UACAN,SAAS,CAACM,KAAV,GAAgB,EAAhB;UACAL,KAAK,CAACK,KAAN,GAAY,IAAZ;QACN,CAVE,CAUF,OAAME,GAAN,EAAU;UACJC,OAAO,CAACC,GAAR,CAAYF,GAAZ;UACAV,KAAK,CAACQ,KAAN,GAAc,YAAd;QACJ;MACJ;IACC,CA/BD;IAiCR;;;;;;;;IAOQ,MAAMW,GAAE,GAAI,YAAW;MACnBnB,KAAK,CAACQ,KAAN,GAAY,EAAZ;;MACH,IAAG;QACI,MAAMF,GAAE,GAAI,MAAMV,KAAK,CAACwB,MAAN,CAAa,uCAAb,CAAlB;QACAT,OAAO,CAACC,GAAR,CAAY,eAAaN,GAAG,CAACG,IAA7B;QACAJ,OAAO;MACb,CAJD,CAIC,OAAMK,GAAN,EAAU;QACJC,OAAO,CAACC,GAAR,CAAYF,GAAZ;QACAV,KAAK,CAACQ,KAAN,GAAc,YAAd;MACJ;IACH,CAVD;;IAYA,OAAO;MACHT,IADG;MACGC,KADH;MACUa,GADV;MACeZ,UADf;MAC2BC,SAD3B;MACsCiB,GADtC;MAC2ChB;IAD3C,CAAP;EAGJ;;AA5EW,CAAf","names":["axios","ref","setup","list","error","input_name","input_age","state","update_id","getList","res","get","value","data","err","console","log","add","post","name","age","patch","id","del","delete"],"sourceRoot":"","sources":["C:\\vue_project\\vue3-first\\src\\ex10_axios\\App3_crud.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <form @submit.prevent=\"add\"><!--@submit.prevent : submit 이벤트 발생시 이동하지 않습니다-->\r\n        <div class=\"input-group mb-3 mt-3\">\r\n            <div class=\"input-group-prepend\">\r\n                <span class=\"input-group-text\">이름</span>\r\n            </div>\r\n            <input type=\"text\" placeholder=\"Username\" v-model=\"input_name\" class=\"form-control\" required>\r\n        </div>\r\n        <div class=\"input-group mb-3 mt-3\">\r\n            <div class=\"input-group-prepend\">\r\n                <span class=\"input-group-text\">나이</span>\r\n            </div>\r\n            <input type=\"text\" placeholder=\"Userage\" v-model=\"input_age\" class=\"form-control\" required\r\n                   maxlength=\"2\" pattern=\"[0-9]{1,2}\">\r\n        </div>\r\n        <button type=\"submit\" class=\"btn btn-info\">{{state}}</button>\r\n        <div class=\"error\">{{error}}</div>\r\n    </form>\r\n        <table class=\"table table-stripped\">\r\n        <caption>\r\n           <span class=\"niji\" colspan=\"2\">name list</span>\r\n        </caption>\r\n        <tbody>\r\n        <tr>\r\n        <th>번호</th>\r\n        <th>이름</th>\r\n        <th>나이</th>\r\n        <th>수정</th>\r\n        <th>삭제</th>\r\n        </tr>\r\n        \r\n        <tr v-for=\"(item, index) in list\" :key=\"index\">\r\n            <td>{{item.id}}</td>\r\n            <td>{{item.name}}</td>\r\n            <td>{{item.age}}</td>\r\n            <td><button class=\"btn btn-primary\" @click=\"update(item)\">수정</button></td>\r\n            <td><button class=\"btn btn-danger\" @click=\"del(item.id)\">삭제</button></td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport {ref} from 'vue';\r\nexport default {\r\n    setup(){\r\n        const list = ref([]);\r\n        const error= ref('');\r\n        const input_name=ref('');\r\n        const input_age=ref(0);\r\n        const state = ref('추가');\r\n        let update_id = 0; //138번 라인에서 수정할 아이디값을 저장할 변수입니다.\r\n\r\n        const getList = async () =>{\r\n         try{\r\n                const res = await axios.get('http://localhost:8088/vue/users');\r\n                list.value = res.data.list;\r\n         }catch(err){\r\n                console.log(err);\r\n                error.value = '데이터를 가져오는 중 오류';\r\n            }\r\n        };\r\n\r\n        getList();\r\n\r\n        const add = async () =>{\r\n            error.value='';\r\n        if(state.value=='추가'){\r\n         try{\r\n                await axios.post('http://localhost:8088/vue/users',{\r\n                    name: input_name.value,\r\n                    age : input_age.value\r\n                });\r\n                input_name.value='';\r\n                input_age.value='';\r\n                getList();\r\n         }catch(err){\r\n                console.log(err);\r\n                error.value = '삽입 중 오류 발생';\r\n            }\r\n        }else{\r\n            try{ \r\n                await axios.patch('http://localhost:8088/vue/users', {\r\n                    name: input_name.value,\r\n                    age: input_age.value,\r\n                    id: update_id\r\n                 });  \r\n                getList();\r\n                input_name.value='';\r\n                input_age.value='';\r\n                state.value='추가';\r\n         }catch(err){\r\n                console.log(err);\r\n                error.value = '수정 중 오류 발생';\r\n            }\r\n        }\r\n        };\r\n\r\n/* \r\n            error.value='';\r\n            input_name.value=item.name;\r\n            input_age.value=item.age;\r\n            state.value='수정완료';\r\n */\r\n\r\n        const del = async () =>{\r\n            error.value='';\r\n         try{\r\n                const res = await axios.delete('http://localhost:8088/vue/users/${id}'); \r\n                console.log(\"delete 후 =\"+res.data);\r\n                getList();\r\n         }catch(err){\r\n                console.log(err);\r\n                error.value = '삭제 중 오류 발생';\r\n            }\r\n        };\r\n\r\n        return {\r\n            list, error, add, input_name, input_age, del, state\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  caption {\r\n    caption-side: top;\r\n    text-align: center;\r\n  }\r\n  table {\r\n    text-align: center;\r\n  }\r\n  button{\r\n    vertical-align:top\r\n  }\r\n    select{width:20%;}\r\n    input{width:50%;}\r\n    input:focus{outline:none;}\r\n    #s1{font-size:18px}\r\n    table{text-align: center;font-size:20px;margin:0 auto}\r\n    caption{ caption-side: top; text-align: center}\r\n    .error{color:tomato}\r\n    </style>"]},"metadata":{},"sourceType":"module"}