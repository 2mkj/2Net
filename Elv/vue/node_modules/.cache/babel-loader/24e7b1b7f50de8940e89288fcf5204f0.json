{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-087845de\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"input-group mb-3 mt-3\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"input-group-prepend\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"input-group-text\"\n}, \"이름\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = {\n  class: \"input-group mb-3 mt-3\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"input-group-prepend\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"input-group-text\"\n}, \"나이\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_6 = {\n  type: \"submit\",\n  class: \"btn btn-info\"\n};\nconst _hoisted_7 = {\n  class: \"error\"\n};\nconst _hoisted_8 = {\n  class: \"table table-stripped\"\n};\nconst _hoisted_9 = {\n  class: \"niji\",\n  colspan: \"2\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"번호\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"이름\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"나이\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"수정\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"삭제\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  class: \"pagination\"\n};\nconst _hoisted_14 = {\n  key: 0,\n  class: \"page-item\"\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n  key: 1,\n  class: \"page-item\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $setup.add && $setup.add(...args), [\"prevent\"]))\n  }, [_createCommentVNode(\"@submit.prevent : submit 이벤트 발생시 이동하지 않습니다\"), _createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"Username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.input_name = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.input_name]])]), _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"Userage\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.input_age = $event),\n    class: \"form-control\",\n    required: \"\",\n    maxlength: \"2\",\n    pattern: \"[0-9]{1,2}\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.input_age]])]), _createElementVNode(\"button\", _hoisted_6, _toDisplayString($setup.state), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", _hoisted_7, _toDisplayString($setup.error), 1\n  /* TEXT */\n  )], 32\n  /* HYDRATE_EVENTS */\n  ), _createElementVNode(\"table\", _hoisted_8, [_createElementVNode(\"caption\", null, [_createElementVNode(\"span\", _hoisted_9, \"name list[\" + _toDisplayString($setup.listcount) + \"]\", 1\n  /* TEXT */\n  )]), _createElementVNode(\"tbody\", null, [_hoisted_10, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.list, (item, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index\n    }, [_createElementVNode(\"td\", null, _toDisplayString(item.id), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(item.name), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(item.age), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-primary\",\n      onClick: $event => $setup.update(item)\n    }, \"수정\", 8\n    /* PROPS */\n    , _hoisted_11)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-danger\",\n      onClick: $event => $setup.del(item.id)\n    }, \"삭제\", 8\n    /* PROPS */\n    , _hoisted_12)])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]), _createElementVNode(\"nav\", null, [_createElementVNode(\"ul\", _hoisted_13, [$setup.currentpage !== 1 ? (_openBlock(), _createElementBlock(\"li\", _hoisted_14, [_createElementVNode(\"a\", {\n    style: {\n      \"cursor\": \"pointer\"\n    },\n    class: \"page-link\",\n    onClick: _cache[3] || (_cache[3] = $event => $setup.getList($setup.currentpage - 1))\n  }, \" Previous \")])) : _createCommentVNode(\"v-if\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.pagelist, page => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: page,\n      class: _normalizeClass([\"page-item\", $setup.currentpage === page ? 'active' : ''])\n    }, [_createElementVNode(\"a\", {\n      style: {\n        \"cursor\": \"pointer\"\n      },\n      class: \"page-link\",\n      onClick: $event => $setup.getList(page)\n    }, _toDisplayString(page), 9\n    /* TEXT, PROPS */\n    , _hoisted_15)], 2\n    /* CLASS */\n    );\n  }), 128\n  /* KEYED_FRAGMENT */\n  )), $setup.maxpage > $setup.currentpage ? (_openBlock(), _createElementBlock(\"li\", _hoisted_16, [_createElementVNode(\"a\", {\n    style: {\n      \"cursor\": \"pointer\"\n    },\n    class: \"page-link\",\n    onClick: _cache[4] || (_cache[4] = $event => $setup.getList($setup.currentpage + 1))\n  }, \"Next\")])) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","type","colspan","_createElementBlock","onSubmit","$setup","_createCommentVNode","_hoisted_3","placeholder","$event","required","_hoisted_5","maxlength","pattern","_toDisplayString","_hoisted_10","_Fragment","_renderList","item","index","key","id","name","age","onClick","_hoisted_11","_hoisted_12","style","page","_hoisted_15"],"sourceRoot":"","sources":["C:\\vue_project\\vue3-first\\src\\ex18_component_store\\component\\board\\board_list.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n      <form @submit.prevent=\"add\"><!--@submit.prevent : submit 이벤트 발생시 이동하지 않습니다-->\r\n          <div class=\"input-group mb-3 mt-3\">\r\n              <div class=\"input-group-prepend\">\r\n                  <span class=\"input-group-text\">이름</span>\r\n              </div>\r\n              <input type=\"text\" placeholder=\"Username\" v-model=\"input_name\" class=\"form-control\" required>\r\n          </div>\r\n          <div class=\"input-group mb-3 mt-3\">\r\n              <div class=\"input-group-prepend\">\r\n                  <span class=\"input-group-text\">나이</span>\r\n              </div>\r\n              <input type=\"text\" placeholder=\"Userage\" v-model=\"input_age\" class=\"form-control\" required\r\n                     maxlength=\"2\" pattern=\"[0-9]{1,2}\">\r\n          </div>\r\n          <button type=\"submit\" class=\"btn btn-info\">{{state}}</button>\r\n          <div class=\"error\">{{error}}</div>\r\n      </form>\r\n          <table class=\"table table-stripped\">\r\n          <caption>\r\n             <span class=\"niji\" colspan=\"2\">name list[{{listcount}}]</span>\r\n          </caption>\r\n          <tbody>\r\n          <tr>\r\n          <th>번호</th>\r\n          <th>이름</th>\r\n          <th>나이</th>\r\n          <th>수정</th>\r\n          <th>삭제</th>\r\n          </tr>\r\n          \r\n          <tr v-for=\"(item, index) in list\" :key=\"index\">\r\n              <td>{{item.id}}</td>\r\n              <td>{{item.name}}</td>\r\n              <td>{{item.age}}</td>\r\n              <td><button class=\"btn btn-primary\" @click=\"update(item)\">수정</button></td>\r\n              <td><button class=\"btn btn-danger\" @click=\"del(item.id)\">삭제</button></td>\r\n          </tr>\r\n          </tbody>\r\n      </table>\r\n  \r\n      <nav>\r\n       <ul class=\"pagination\">\r\n          <li v-if=\"currentpage !== 1\" class=\"page-item\">\r\n              <a style=\"cursor:pointer\" class=\"page-link\" @click=\"getList(currentpage-1)\">\r\n                  Previous\r\n              </a>\r\n          </li>   \r\n          <li\r\n              v-for=\"page in pagelist\"\r\n              :key=\"page\"\r\n              class=\"page-item\" \r\n              :class=\"currentpage === page ? 'active' : ''\"\r\n          >\r\n              <a style=\"cursor:pointer\" class=\"page-link\" @click=\"getList(page)\">{{page}}</a>\r\n          </li>\r\n          <li v-if=\"maxpage > currentpage\" class=\"page-item\">\r\n              <a style=\"cursor:pointer\" class=\"page-link\" @click=\"getList(currentpage+1)\">Next</a>\r\n          </li>\r\n       </ul>\r\n      </nav>\r\n  \r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  /* \r\n  axiosetting.js 에서 정의\r\n  export default axios.create({\r\n      baseURL : 'http://localhost:8088/vue/'\r\n  })\r\n  \r\n  axios 적용시 baseURL을 제외한 주소 작성 가능합니다\r\n   await axios.post('http://localhost:8088/vue/users',{\r\n      => await axios.post('users',{\r\n  */\r\n  import axios from './axiossetting.js';\r\n  import {ref} from 'vue';\r\n  export default {\r\n      setup(){\r\n          const list = ref([]);\r\n          const error= ref('');\r\n          const input_name=ref('');\r\n          const input_age=ref(0);\r\n          const state = ref('추가');\r\n          let update_id = 0; //138번 라인에서 수정할 아이디값을 저장할 변수입니다.\r\n  \r\n          const limit = 2;\r\n          const currentpage = ref(1);\r\n          const maxpage = ref(1);\r\n          const listcount = ref(0);\r\n          const pagelist = ref([])\r\n  \r\n  \r\n          //page = currentpage.value\r\n          //매개변수로 page값을 받았는데 만약 전달된 값이 없는 경우 currentpage.value값을 갖습니다\r\n          //getList()로 호출하면 page는 currentpage.value값을 갖습니다\r\n          //getList(2)로 호출하면 page는 2의 값을 갖습니다\r\n          const getList = async (page=currentpage.value) =>{\r\n           try{\r\n                  const res = await axios.get(`users?page=${page}&limit=${limit}`);\r\n                  \r\n                  list.value = res.data.list;\r\n                  listcount.value=res.data.listcount;\r\n                  maxpage.value=res.data.maxpage;\r\n                  currentpage.value=res.data.currentpage;\r\n  \r\n                  pagelist.value=[];\r\n                  for(let i=res.data.startpage; i<=res.data.endpage;i++){\r\n                      pagelist.value.push(i);\r\n                  }\r\n           }catch(err){\r\n                  console.log(err);\r\n                  error.value = '데이터를 가져오는 중 오류';\r\n              }\r\n          };\r\n  \r\n          getList();\r\n  \r\n          const add = async () =>{\r\n              error.value='';\r\n          if(state.value=='추가'){\r\n           try{\r\n                  await axios.post('users',{\r\n                      name: input_name.value,\r\n                      age : input_age.value\r\n                  });\r\n                  input_name.value='';\r\n                  input_age.value='';\r\n                  getList();\r\n           }catch(err){\r\n                  console.log(err);\r\n                  error.value = '삽입 중 오류 발생';\r\n              }\r\n          }else{\r\n              try{ \r\n                  await axios.patch('users', {\r\n                      name: input_name.value,\r\n                      age: input_age.value,\r\n                      id: update_id\r\n                   });  \r\n                  input_name.value='';\r\n                  input_age.value='';\r\n                  state.value='추가';\r\n                  getList();\r\n           }catch(err){\r\n                  console.log(err);\r\n                  error.value = 'update 중 오류 발생';\r\n              }\r\n          }//else end\r\n          };//add end\r\n  \r\n          const del = async (id) =>{\r\n              let answer = confirm('정말 삭제하시겠습니까?');\r\n              if(answer){\r\n              try{\r\n                  await axios.delete(`users/${id}`); \r\n                  getList();\r\n              }catch(err){\r\n                  console.log(err);\r\n                  error.value = '삭제 중 오류';\r\n              }\r\n              }//if end\r\n          };\r\n  \r\n          //name list에서 수정 버튼 클릭시\r\n          //이름과 나이 input에 선택한 이름과 나이가 나타나고\r\n          //추가 버튼의 레이블을 수정완료로 변경합니다.\r\n          const update = (item)=>{\r\n              input_name.value=item.name;\r\n              input_age.value=item.age;\r\n              state.value='수정완료';\r\n              update_id = item.id; //106번 라인에서 update_id의 값을 사용합니다.\r\n          }\r\n  \r\n          return {\r\n              list, error, add, input_name, input_age, del, update, state,\r\n              limit, currentpage, maxpage, listcount, pagelist, getList\r\n          }\r\n      }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n    caption {\r\n      caption-side: top;\r\n      text-align: center;\r\n    }\r\n    table {\r\n      text-align: center;\r\n    }\r\n    button{\r\n      vertical-align:top\r\n    }\r\n      select{width:20%;}\r\n      input{width:50%;}\r\n      input:focus{outline:none;}\r\n      #s1{font-size:18px}\r\n      table{text-align: center;font-size:20px;margin:0 auto}\r\n      caption{ caption-side: top; text-align: center}\r\n      .error{color:tomato}\r\n      </style>"]},"metadata":{},"sourceType":"module"}