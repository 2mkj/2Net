{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-f8ac7144\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"input-group mb-3 mt-3\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"input-group-prepend\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"input-group-text\"\n}, \"이름\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = {\n  class: \"input-group mb-3 mt-3\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"input-group-prepend\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"input-group-text\"\n}, \"나이\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_6 = {\n  type: \"submit\",\n  class: \"btn btn-info\"\n};\nconst _hoisted_7 = {\n  class: \"error\"\n};\nconst _hoisted_8 = {\n  class: \"table table-stripped\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"caption\", null, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"niji\",\n  colspan: \"2\"\n}, \"name list\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"번호\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"이름\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"나이\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"수정\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"삭제\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $setup.add && $setup.add(...args), [\"prevent\"]))\n  }, [_createCommentVNode(\"@submit.prevent : submit 이벤트 발생시 이동하지 않습니다\"), _createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"Username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.input_name = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.input_name]])]), _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"Userage\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.input_age = $event),\n    class: \"form-control\",\n    required: \"\",\n    maxlength: \"2\",\n    pattern: \"[0-9]{1,2}\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.input_age]])]), _createElementVNode(\"button\", _hoisted_6, _toDisplayString($setup.state), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", _hoisted_7, _toDisplayString($setup.error), 1\n  /* TEXT */\n  )], 32\n  /* HYDRATE_EVENTS */\n  ), _createElementVNode(\"table\", _hoisted_8, [_hoisted_9, _createElementVNode(\"tbody\", null, [_hoisted_10, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.list, (item, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index\n    }, [_createElementVNode(\"td\", null, _toDisplayString(item.id), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(item.name), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(item.age), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-primary\",\n      onClick: $event => _ctx.update(item)\n    }, \"수정\", 8\n    /* PROPS */\n    , _hoisted_11)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-danger\",\n      onClick: $event => $setup.del(item.id)\n    }, \"삭제\", 8\n    /* PROPS */\n    , _hoisted_12)])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","type","colspan","_createElementBlock","onSubmit","$setup","_createCommentVNode","_hoisted_3","placeholder","$event","required","_hoisted_5","maxlength","pattern","_toDisplayString","_hoisted_9","_hoisted_10","_Fragment","_renderList","item","index","key","id","name","age","onClick","_ctx","_hoisted_11","_hoisted_12"],"sourceRoot":"","sources":["C:\\vue_project\\vue3-first\\src\\ex10_axios\\App3_crud.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <form @submit.prevent=\"add\"><!--@submit.prevent : submit 이벤트 발생시 이동하지 않습니다-->\r\n        <div class=\"input-group mb-3 mt-3\">\r\n            <div class=\"input-group-prepend\">\r\n                <span class=\"input-group-text\">이름</span>\r\n            </div>\r\n            <input type=\"text\" placeholder=\"Username\" v-model=\"input_name\" class=\"form-control\" required>\r\n        </div>\r\n        <div class=\"input-group mb-3 mt-3\">\r\n            <div class=\"input-group-prepend\">\r\n                <span class=\"input-group-text\">나이</span>\r\n            </div>\r\n            <input type=\"text\" placeholder=\"Userage\" v-model=\"input_age\" class=\"form-control\" required\r\n                   maxlength=\"2\" pattern=\"[0-9]{1,2}\">\r\n        </div>\r\n        <button type=\"submit\" class=\"btn btn-info\">{{state}}</button>\r\n        <div class=\"error\">{{error}}</div>\r\n    </form>\r\n        <table class=\"table table-stripped\">\r\n        <caption>\r\n           <span class=\"niji\" colspan=\"2\">name list</span>\r\n        </caption>\r\n        <tbody>\r\n        <tr>\r\n        <th>번호</th>\r\n        <th>이름</th>\r\n        <th>나이</th>\r\n        <th>수정</th>\r\n        <th>삭제</th>\r\n        </tr>\r\n        \r\n        <tr v-for=\"(item, index) in list\" :key=\"index\">\r\n            <td>{{item.id}}</td>\r\n            <td>{{item.name}}</td>\r\n            <td>{{item.age}}</td>\r\n            <td><button class=\"btn btn-primary\" @click=\"update(item)\">수정</button></td>\r\n            <td><button class=\"btn btn-danger\" @click=\"del(item.id)\">삭제</button></td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport {ref} from 'vue';\r\nexport default {\r\n    setup(){\r\n        const list = ref([]);\r\n        const error= ref('');\r\n        const input_name=ref('');\r\n        const input_age=ref(0);\r\n        const state = ref('추가');\r\n        let update_id = 0; //138번 라인에서 수정할 아이디값을 저장할 변수입니다.\r\n\r\n        const getList = async () =>{\r\n         try{\r\n                const res = await axios.get('http://localhost:8088/vue/users');\r\n                list.value = res.data.list;\r\n         }catch(err){\r\n                console.log(err);\r\n                error.value = '데이터를 가져오는 중 오류';\r\n            }\r\n        };\r\n\r\n        getList();\r\n\r\n        const add = async () =>{\r\n            error.value='';\r\n        if(state.value=='추가'){\r\n         try{\r\n                await axios.post('http://localhost:8088/vue/users',{\r\n                    name: input_name.value,\r\n                    age : input_age.value\r\n                });\r\n                input_name.value='';\r\n                input_age.value='';\r\n                getList();\r\n         }catch(err){\r\n                console.log(err);\r\n                error.value = '삽입 중 오류 발생';\r\n            }\r\n        }else{\r\n            try{ \r\n                await axios.patch('http://localhost:8088/vue/users', {\r\n                    name: input_name.value,\r\n                    age: input_age.value,\r\n                    id: update_id\r\n                 });  \r\n                getList();\r\n                input_name.value='';\r\n                input_age.value='';\r\n                state.value='추가';\r\n         }catch(err){\r\n                console.log(err);\r\n                error.value = '수정 중 오류 발생';\r\n            }\r\n        }\r\n        };\r\n\r\n/* \r\n            error.value='';\r\n            input_name.value=item.name;\r\n            input_age.value=item.age;\r\n            state.value='수정완료';\r\n */\r\n\r\n        const del = async () =>{\r\n            error.value='';\r\n         try{\r\n                const res = await axios.delete('http://localhost:8088/vue/users/${id}'); \r\n                console.log(\"delete 후 =\"+res.data);\r\n                getList();\r\n         }catch(err){\r\n                console.log(err);\r\n                error.value = '삭제 중 오류 발생';\r\n            }\r\n        };\r\n\r\n        return {\r\n            list, error, add, input_name, input_age, del, state\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  caption {\r\n    caption-side: top;\r\n    text-align: center;\r\n  }\r\n  table {\r\n    text-align: center;\r\n  }\r\n  button{\r\n    vertical-align:top\r\n  }\r\n    select{width:20%;}\r\n    input{width:50%;}\r\n    input:focus{outline:none;}\r\n    #s1{font-size:18px}\r\n    table{text-align: center;font-size:20px;margin:0 auto}\r\n    caption{ caption-side: top; text-align: center}\r\n    .error{color:tomato}\r\n    </style>"]},"metadata":{},"sourceType":"module"}