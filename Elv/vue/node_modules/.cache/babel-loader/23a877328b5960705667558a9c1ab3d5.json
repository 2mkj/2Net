{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective } from \"vue\";\nimport _imports_0 from '../assets/pencil.png';\nimport _imports_1 from '../assets/delete.png';\nconst _hoisted_1 = {\n  id: \"comment\"\n};\nconst _hoisted_2 = {\n  class: \"btn btn-info float-left\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"table table-striped\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"td\", null, \"아이디\"), /*#__PURE__*/_createElementVNode(\"td\", null, \"내용\"), /*#__PURE__*/_createElementVNode(\"td\", null, \"날짜\")])], -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _directive_fot = _resolveDirective(\"fot\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"button\", _hoisted_2, _toDisplayString(_ctx.count_message), 1\n  /* TEXT */\n  ), _createElementVNode(\"button\", {\n    class: \"btn btn-info float-right\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.add && $setup.add(...args))\n  }, _toDisplayString(_ctx.button_message), 1\n  /* TEXT */\n  ), _withDirectives(_createElementVNode(\"textarea\", {\n    rows: \"3\",\n    class: \"form-control\",\n    onInput: _cache[1] || (_cache[1] = (...args) => $setup.change && $setup.change(...args)),\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.content = $event),\n    style: {\n      \"resize\": \"none\"\n    },\n    maxLength: \"50\"\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, _ctx.content, void 0, {\n    trim: true\n  }]]), _ctx.listcount > 0 ? (_openBlock(), _createElementBlock(\"table\", _hoisted_3, [_hoisted_4, _createElementVNode(\"tbody\", null, [_withDirectives((_openBlock(), _createElementBlock(\"tr\", {\n    key: _ctx.index\n  }, [_createElementVNode(\"td\", null, _toDisplayString(_ctx.item.id), 1\n  /* TEXT */\n  ), _createElementVNode(\"td\", null, _toDisplayString(_ctx.item.content), 1\n  /* TEXT */\n  ), _ctx.item.id == $setup.parent_id ? (_openBlock(), _createElementBlock(\"td\", _hoisted_5, [_createTextVNode(_toDisplayString(_ctx.item.reg_date) + \" \", 1\n  /* TEXT */\n  ), _createElementVNode(\"img\", {\n    src: _imports_0,\n    width: \"15px\",\n    onClick: _cache[3] || (_cache[3] = $event => $setup.update(_ctx.item.content, _ctx.item.num))\n  }), _createElementVNode(\"img\", {\n    src: _imports_1,\n    width: \"15px\",\n    onClick: _cache[4] || (_cache[4] = $event => $setup.update(_ctx.item.num))\n  })])) : (_openBlock(), _createElementBlock(\"td\", _hoisted_6, _toDisplayString(_ctx.item.reg_date), 1\n  /* TEXT */\n  ))])), [[_directive_fot, (_ctx.item, _ctx.index) in _ctx.list]])])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n    id: \"message\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $setup.more && $setup.more(...args))\n  }, _toDisplayString(_ctx.message), 1\n  /* TEXT */\n  )]);\n}","map":{"version":3,"mappings":";OAqBWA,gBAA0B;OAC1BC,gBAA0B;;EApB9BC,EAAE,EAAC;;;EACCC,KAAK,EAAC;;;;EAQPA,KAAK,EAAC;;;gCACXC,oBAEQ,OAFR,EAEQ,IAFR,EAEQ,cADNA,oBAA2C,IAA3C,EAA2C,IAA3C,EAA2C,cAAvCA,oBAAY,IAAZ,EAAY,IAAZ,EAAI,KAAJ,CAAuC,eAA3BA,oBAAW,IAAX,EAAW,IAAX,EAAI,IAAJ,CAA2B,eAAhBA,oBAAW,IAAX,EAAW,IAAX,EAAI,IAAJ,CAAgB,CAA3C,CACM,CAFR;;AAAA;;;;;;;;;;;uBAVHC,oBA2BM,KA3BN,cA2BM,CA1BLD,oBAAkE,QAAlE,cAAkEE,iBAAxBC,kBAAwB,CAAlE,EAAuD;EAAA;EAAvD,CA0BK,EAzBLH,oBAAiF,QAAjF,EAAiF;IAAzED,KAAK,EAAC,0BAAmE;IAAvCK,OAAK,yCAAEC,iCAAF;EAAkC,CAAjF,mBAAwDF,oBAAxD,EAAsE;EAAA;EAAtE,CAyBK,kBAxBLH,oBAK8B,UAL9B,EAK8B;IALpBM,IAAI,EAAC,GAKe;IAJ1BP,KAAK,EAAC,cAIoB;IAHvBQ,OAAK,yCAAIF,uCAAJ,CAGkB;+DAFZF,eAAOK,OAEK;IADrBC,KAAmB,EAAnB;MAAA;IAAA,CACqB;IAA1BC,SAAS,EAAC;EAAgB,CAL9B;;EAAA,kBAGkBP;UAAd;MAqBC,EAlBoCA,iBAAS,mBAAlDF,oBAgBW,OAhBX,cAgBW,CAfTU,UAeS,EAZTX,oBAWW,OAXX,EAWW,IAXX,EAWW,gCAVZC,oBASK,IATL,EASK;IAT6BW,GAAG,EAAET;EASlC,CATL,EAA4C,CAC3CH,oBAAoB,IAApB,EAAoB,IAApB,EAAoBE,iBAAdC,UAAKL,EAAS,CAApB,EAAa;EAAA;EAAb,CAD2C,EAE3CE,oBAAyB,IAAzB,EAAyB,IAAzB,EAAyBE,iBAAnBC,UAAKU,OAAc,CAAzB,EAAkB;EAAA;EAAlB,CAF2C,EAGjCV,UAAKL,EAAL,IAASO,kCAAnBJ,oBAIK,IAJL,EAIKa,UAJL,EAIK,mCAHFX,UAAKY,YAAU,KACjB;EAAA;GAEI,EAFJf,oBAAoF,KAApF,EAAoF;IAA/EgB,GAA0B,EAA1BpB,UAA+E;IAApDqB,KAAK,EAAC,MAA8C;IAAtCb,OAAK,sCAAEC,cAAOF,UAAKU,OAAZ,EAAoBV,UAAKe,GAAzB,CAAF;EAAiC,CAApF,CAEI,EADJlB,oBAAuE,KAAvE,EAAuE;IAAlEgB,GAA0B,EAA1BnB,UAAkE;IAAvCoB,KAAK,EAAC,MAAiC;IAAzBb,OAAK,sCAAEC,cAAOF,UAAKe,GAAZ,CAAF;EAAoB,CAAvE,CACI,CAJL,oBAKAjB,oBAAiC,IAAjC,EAAiCkB,UAAjC,EAAiCjB,iBAApBC,UAAKY,QAAe,CAAjC,EAA0B;EAAA;EAA1B,EAR2C,CAA5C,uBAAYZ,WAAKA,eAAUA,YAUf,CAXX,CAYS,CAhBX,sCAkBK,EADNH,oBAAiD,KAAjD,EAAiD;IAA5CF,EAAE,EAAC,SAAyC;IAA9BM,OAAK,yCAAEC,mCAAF;EAAyB,CAAjD,mBAAkCF,aAAlC,EAAyC;EAAA;EAAzC,CACM,CA3BN","names":["_imports_0","_imports_1","id","class","_createElementVNode","_createElementBlock","_toDisplayString","_ctx","onClick","$setup","rows","onInput","$event","style","maxLength","_hoisted_4","key","content","_hoisted_5","reg_date","src","width","num","_hoisted_6"],"sourceRoot":"","sources":["C:\\vue_project\\vue3-first\\src\\ex18_component_store\\component\\commentDo.vue"],"sourcesContent":["\r\n<template>\r\n  <div id=\"comment\">\r\n\t\t\t<button class=\"btn btn-info float-left\">{{count_message}}</button>\r\n\t\t\t<button class=\"btn btn-info float-right\" @click=\"add\">{{button_message}}</button>\r\n\t\t\t<textarea rows=3 \r\n\t\t\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\t  \t\t@input = \"change\" \r\n\t\t\t\t\t\t\tv-model.trim=\"content\"\r\n\t\t\t\t      \t\tstyle=\"resize:none\" \r\n\t\t\t\t\t\t\tmaxLength=\"50\"></textarea>\r\n\t\t\t<table class=\"table table-striped\" v-if=\"listcount>0\">\r\n\t\t\t  <thead>\r\n\t\t\t    <tr><td>아이디</td><td>내용</td><td>날짜</td></tr>\r\n\t\t\t  </thead>\r\n\t\t\t  <tbody>\r\n\t\t\t\t<tr v-fot=\"(item,index) in list\" :key=\"index\">\r\n\t\t\t\t\t<td>{{item.id}}</td>\r\n\t\t\t\t\t<td>{{item.content}}</td>\r\n\t\t\t\t\t<td v-if=\"item.id==parent_id\">\r\n\t\t\t\t\t\t{{item.reg_date}}\r\n\t\t\t\t\t\t<img src=\"../assets/pencil.png\" width=\"15px\" @click=\"update(item.content,item.num)\">\r\n\t\t\t\t\t\t<img src=\"../assets/delete.png\" width=\"15px\" @click=\"update(item.num)\">\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td v-else>{{item.reg_date}}</td>\r\n\t\t\t\t</tr>\r\n\t\t      </tbody>\r\n\t\t    </table>\r\n\t\t<div id=\"message\" @click=\"more\">{{message}}</div>\r\n\t\t</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from '../axios/axiossetting.js';\r\nimport { useRoute } from 'vue-router';\r\nimport { ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\nexport default {\r\n\tprops:{\r\n\t\tparent_id:{\r\n\t\t\ttype:String,\r\n            required:true\r\n\t\t}\r\n\t},\r\n\tsetup(props){\r\n\t\t//board_list.vue에서 <router-link :to=\"{name:'Board_Detail'},params:{num:`${item.board_NUM`}}\"로\r\n\t\t//이동할 때 사용된 파라미터 num을 가져옵니다.\r\n\t\tconst board_num = useRoute().params.num;\r\n\r\n\t\tlet page=1;\r\n\t\tconst listcount = ref(0);\r\n\t\tconst list = ref([]);\r\n\t\tconst content = ref('');\r\n\t\tconst message = ref(\"등록된 댓글이 없습니다.\");\r\n\t\tconst button_message = ref(\"등록\");\r\n\t\tconst count_message=ref(\"총 50자까지 가능합니다.\");\r\n\t\tlet comment_num =0;\r\n\t\tconst store = useStore(); //component/board/board_detail.vue에서 사용될 count를 보내기위해 사용합니다.\r\n\r\n\t\tconst getList = async(page)=>{\r\n\t\t\ttry{\r\n\t\t\t\tconst res = await axios.get(\"comments\",{params:{board_num : board_num, page:page}})\r\n\t\t\t\tlistcount.value = res.data.listcount;\r\n\t\t\t\tlist.value = res.data.list;\r\n\r\n\t\t\t\tif(listcount.value==0){\r\n\t\t\t\t\tmessage.value=\"등록된 댓글이 없습니다.\"\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(listcount.value > list.value.length){\r\n\t\t\t\t\t\tmessage.value=\"더보기\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tmessage.value=\"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcount_message.value=\"총 50자까지 가능합니다.\"\r\n\r\n\t\t\t\t//store에 저장\r\n\t\t\t\tstore.dispatch('count', listcount.value);\r\n\t\t\t}catch(err){\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tgetList(1);\r\n\r\n\t\tconst limit = 50; // 총 50자까지 가능\r\n\t\tconst change = (event)=>{\r\n\t\t\tlet value = event.target.value;\r\n\t\t\tlet length = value.length;\r\n\t\t\tif(length>limit){\r\n\t\t\t\tvalue = value.substring(0, limit);\r\n\t\t\t\tlength = limit;\r\n\t\t\t}\r\n\t\t\tcount_message.value=length + \"/\" +limit;\r\n\t\t}\r\n\r\n\t\tconst add = async ()=>{\r\n\t\t\tif(!content.value){\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn{\r\n\t\t\tupdate, del, more, parent_id, getList, change, add\r\n\t\t}\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}